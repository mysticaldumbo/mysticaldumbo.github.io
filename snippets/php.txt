function isPalindrome($str) {
    // Convert the string to lowercase and remove non-alphanumeric characters
    $str = strtolower(preg_replace('/[^a-z0-9]/i', '', $str));
    // Check if the string is equal to its reverse
    return $str === strrev($str);
}

$input = "A man, a plan, a canal, Panama!";
if (isPalindrome($input)) {
    echo "The string is a palindrome.";
} else {
    echo "The string is not a palindrome.";
}